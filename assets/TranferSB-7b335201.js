import{n as B,r,x as j,j as e,F as P,a,q as k,c as F,s as I,t as C,p as V,e as q,v as L}from"./index-3598420a.js";import{B as U}from"./BreadcrumNav-712ea98e.js";import{u as w,C as S,a as A}from"./formik.esm-30aa03e9.js";import{u as D}from"./useAxiosPrivate-04600e2e.js";const E=()=>{const n=B(s=>s.user.user),o=D(),[u,f]=r.useState(!1),[d,i]=r.useState(""),{setcurrentSteps:y,setformData:g}=r.useContext(x),N=j(n.username),{errors:c,handleBlur:m,handleChange:v,handleSubmit:_,values:h,touched:p,setFieldValue:t}=w({initialValues:{amount:"",account_number:"",purpose:"",beneficiary:""},validationSchema:N,onSubmit:s=>{T(s)}}),T=async s=>{g(s),y(b=>b+1)},l=({target:s})=>{t("account_number",s.value),o.post("/validate-account-numbers/",{acc_number:s.value}).then(({data:b})=>{b.valid?(t("beneficiary",b.id),i(b.name)):(t("beneficiary","Invalid"),i("invalid"))})};return e(P,{children:a("form",{onSubmit:_,children:[a("div",{className:" mb-3",id:"amount_box",children:[e(S,{handleBlur:m,handleChange:v,label:"Amount",name:"amount",type:"number",value:h.amount,touched:p.amount,error:c.amount,id:"",placeholder:""}),e("i",{className:"fa-solid fa-dollar dollarSign"})]}),a("div",{className:" mb-3",children:[e(S,{handleBlur:m,handleChange:l,label:"Account Number",name:"account_number",type:"number",value:h.account_number,touched:p.account_number,error:c.account_number,id:"",placeholder:""}),a("p",{className:"text-muted mt-1",children:["benneficiary : Â ",c.beneficiary?e("span",{className:"text-danger ",children:c.beneficiary}):e("span",{className:"text-warning ",children:d})]})]}),e("div",{className:" mb-3",children:e(S,{handleBlur:m,handleChange:v,label:"Purpose of Transfer",name:"purpose",type:"text",value:h.purpose,touched:p.purpose,placeholder:"purpose of transfer",error:c.purpose,id:""})}),e("div",{className:" mb-3",children:e("div",{className:"d-grid gap-2",children:e(A,{color:"outline-primary",text:"Submit",loading:u,type:"submit"})})})]})})},O=()=>{const n=B(t=>t.user.user),{formData:o}=r.useContext(x),u=k();let f=o;const[d,i]=r.useState(!1),y=D(),g=F(),{errors:N,handleBlur:c,handleChange:m,handleSubmit:v,values:_,touched:h}=w({initialValues:{security_code:""},validationSchema:I,onSubmit:t=>{p(f,t)}}),p=async(t,T)=>{if(n.security_pin===T.security_code){i(!0);try{const{data:l}=await y.post("/transfer-same/",t);l.error?C.error(l.msg):(u(V(l.tx.sender)),C.info("Transaction created")),g("/transactions-log",{replace:!0})}catch{}return!0}else return C.error("Invalid security pin"),!1};return e(P,{children:a("form",{onSubmit:v,children:[a("div",{className:" mb-3",id:"amount_box",children:[e(S,{handleBlur:c,handleChange:m,label:"Security Pin",name:"security_code",type:"text",value:_.security_code,touched:h.security_code,error:N.security_code,id:"",placeholder:""}),e("i",{className:"fa-solid fa-lock dollarSign"})]}),e("div",{className:" mb-3",children:e("div",{className:"d-grid gap-2",children:e(A,{color:"outline-primary",text:"Submit",loading:d,type:"submit"})})})]})})},R=()=>{const{currentSteps:n}=r.useContext(x);return[e(E,{}),e(O,{})][n]},x=r.createContext(void 0),J=()=>{q("Transfer to onlineseacoat bank");const[n,o]=r.useState(0),[u,f]=r.useState(),d=B(i=>i.user.user);return e(P,{children:e("div",{className:"container",children:a("div",{className:"row justify-content-center align-item-center",children:[e(U,{pagenavTitle:"Transfer",currentPage:"transfer"}),e("div",{className:"mt-4"}),e("div",{className:"col-lg-4",children:a("div",{className:"amountBox",children:[e("h4",{children:"available balance"}),a("h2",{children:["$",e("span",{children:L(d.balance)})]})]})}),e("div",{className:"col-lg-8",children:a("div",{className:"transferCard",children:[e("p",{children:"Transfer to the same bank"}),e(x.Provider,{value:{currentSteps:n,setcurrentSteps:o,formData:u,setformData:f},children:e(R,{})})]})})]})})})};export{x as TxtSameContext,J as default};
