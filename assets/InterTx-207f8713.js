import{r as l,T as k,j as e,F as g,a as c,q as I,c as P,n as N,s as D,t as _,p as j,e as A,v as F}from"./index-76929380.js";import{B as q}from"./BreadcrumNav-2099f685.js";import{u as x,C as o,a as S}from"./formik.esm-8f4a00e2.js";import{u as L}from"./useAxiosPrivate-58377221.js";const O=()=>{const[i,u]=l.useState(!1),{setformData:d,setcurrentSteps:m}=l.useContext(p),{handleBlur:a,handleChange:t,handleSubmit:f,errors:r,touched:n,values:s}=x({initialValues:{first_name:"",last_name:"",country:"",city:"",ben_account_number:"",iban_number:"",bank_name:"",swift_code:"",amount:"",purpose:""},validationSchema:k,onSubmit(v){u(!0),d(v),m(y=>y+1)}});return e(g,{children:c("form",{onSubmit:f,children:[c("div",{className:"row",children:[e("div",{className:"col-lg-6 mb-3",children:e(o,{handleBlur:a,handleChange:t,label:"First name",name:"first_name",type:"text",value:s.first_name,touched:n.first_name,error:r.first_name,id:"",placeholder:""})}),e("div",{className:"col-lg-6 mb-3",children:e(o,{handleBlur:a,handleChange:t,label:"Last name",name:"last_name",type:"text",value:s.last_name,touched:n.last_name,error:r.last_name,id:"",placeholder:""})}),e("div",{className:"col-lg-6 mb-3",children:e(o,{handleBlur:a,handleChange:t,label:"City (if any)",name:"city",type:"text",value:s.city,touched:n.city,error:r.city,id:"",placeholder:""})}),e("div",{className:"col-lg-6 mb-3",children:e(o,{handleBlur:a,handleChange:t,label:"Country (if any)",name:"country",type:"text",value:s.country,touched:n.country,error:r.country,id:"",placeholder:""})}),e("div",{className:"col-lg-6 mb-3",children:e(o,{handleBlur:a,handleChange:t,label:"Beneficiary account number",name:"ben_account_number",type:"text",value:s.ben_account_number,touched:n.ben_account_number,error:r.ben_account_number,id:"",placeholder:""})}),e("div",{className:"col-lg-6 mb-3",children:e(o,{handleBlur:a,handleChange:t,label:"IBAN Number",name:"iban_number",type:"text",value:s.iban_number,touched:n.iban_number,error:r.iban_number,id:"",placeholder:""})}),e("div",{className:"col-lg-6 mb-3",children:e(o,{handleBlur:a,handleChange:t,label:" Bank Name",name:"bank_name",type:"text",value:s.bank_name,touched:n.bank_name,error:r.bank_name,id:"",placeholder:""})}),e("div",{className:"col-lg-6 mb-3",children:e(o,{handleBlur:a,handleChange:t,label:"Swift/BIC Code",name:"swift_code",type:"text",value:s.swift_code,touched:n.swift_code,error:r.swift_code,id:"",placeholder:""})})]}),c("div",{className:" mb-3",id:"amount_box",children:[e(o,{handleBlur:a,handleChange:t,label:"Amount",name:"amount",type:"number",value:s.amount,touched:n.amount,error:r.amount,id:"",placeholder:""}),e("i",{className:"fa-solid fa-dollar dollarSign"})]}),e("div",{className:" mb-3",children:e(o,{handleBlur:a,handleChange:t,label:"Purpose of Transfer",name:"purpose",type:"text",value:s.purpose,touched:n.purpose,error:r.purpose,placeholder:"....",id:""})}),e("div",{className:" mb-3",children:e("div",{className:"d-grid gap-2",children:e(S,{color:"outline-primary",text:"Submit",loading:i,type:"submit"})})})]})})},U=()=>{const[i,u]=l.useState(!1),d=I(),m=L(),a=P(),t=N(h=>h.user.user),{formData:f}=l.useContext(p);let r=f;const{errors:n,handleBlur:s,handleChange:v,handleSubmit:y,values:C,touched:T}=x({initialValues:{security_code:""},validationSchema:D,onSubmit:h=>{w(r,h)}}),w=async(h,B)=>{if(t.security_pin===B.security_code){u(!0);try{const{data:b}=await m.post("/transfer-inter/",h);b.error?_.error(b.msg):(d(j(b.tx.sender)),_.info("Transaction created")),a("/transactions-log",{replace:!0})}catch{}return!0}else return _.error("Invalid security pin"),!1};return e(g,{children:c("form",{onSubmit:y,children:[c("div",{className:" mb-3",id:"amount_box",children:[e(o,{handleBlur:s,handleChange:v,label:"Security Pin",name:"security_code",type:"text",value:C.security_code,touched:T.security_code,error:n.security_code,id:"",placeholder:""}),e("i",{className:"fa-solid fa-lock dollarSign"})]}),e("div",{className:" mb-3",children:e("div",{className:"d-grid gap-2",children:e(S,{color:"outline-primary",text:"Submit",loading:i,type:"submit"})})})]})})},V=()=>{const{currentSteps:i}=l.useContext(p);return[e(O,{}),e(U,{})][i]},p=l.createContext(void 0),z=()=>{A("International transfer");const i=N(t=>t.user.user),[u,d]=l.useState(0),[m,a]=l.useState();return e(g,{children:e("div",{className:"container",children:c("div",{className:"row justify-content-center  ",children:[e(q,{pagenavTitle:"Transfer",currentPage:"transfer"}),e("div",{className:"mt-4"}),e("div",{className:"col-lg-4",children:c("div",{className:"amountBox",children:[e("h4",{children:"available balance"}),c("h2",{children:["$",e("span",{children:F(i.balance)})]})]})}),e("div",{className:"col-lg-8",children:c("div",{className:"transferCard",children:[e("p",{children:"International transfer"}),e(p.Provider,{value:{currentSteps:u,setcurrentSteps:d,formData:m,setformData:a},children:e(V,{})}),e("small",{style:{color:"red"},children:"Warning: if you have insufficient funds in your account to cover the transactions, your account is at risk of going into overdraft."})]})})]})})})};export{p as TransferInContext,z as default};
